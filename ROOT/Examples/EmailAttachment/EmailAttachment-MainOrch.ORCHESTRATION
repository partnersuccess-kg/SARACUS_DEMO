{"job":{"components":{"67824":{"id":67824,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":144,"y":32,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"EmailAttachment-GetAttachment 0"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"EmailAttachment-GetAttachment"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"attachment_name"},"2":{"slot":2,"type":"STRING","value":"${attachment_name}"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"email_address"},"2":{"slot":2,"type":"STRING","value":"${email_address}"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"email_id"},"2":{"slot":2,"type":"STRING","value":"${email_id}"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"s3_bucket"},"2":{"slot":2,"type":"STRING","value":"${s3_bucket}"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"email_folder"},"2":{"slot":2,"type":"STRING","value":"${email_folder}"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"local_stg"},"2":{"slot":2,"type":"STRING","value":"${local_stg}"}}}},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[67833]},"67825":{"id":67825,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-205266581,"x":-400,"y":0,"width":32,"height":32,"inputConnectorIDs":[67830],"outputSuccessConnectorIDs":[67831],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Email Query 0"}}}},"visible":true},"2":{"slot":2,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true},"6":{"slot":6,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${email_folder}"}}}},"visible":true},"7":{"slot":7,"name":"Data Selection","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Attachments"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"Subject"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"From"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"Date"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"PartContentTypes"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"PartSizes"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"PartFilenames"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"Mailbox"}}}},"visible":true},"8":{"slot":8,"name":"Data Source Filter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Subject"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Like"},"4":{"slot":4,"type":"STRING","value":"Test 2"}}}},"visible":true},"9":{"slot":9,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true},"10":{"slot":10,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT ..."}}}},"visible":false},"11":{"slot":11,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true},"12":{"slot":12,"name":"Connection Options","elements":{},"visible":true},"13":{"slot":13,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"14":{"slot":14,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"15":{"slot":15,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"email_stg"}}}},"visible":true},"16":{"slot":16,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"17":{"slot":17,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"18":{"slot":18,"name":"Primary Keys","elements":{},"visible":true},"20":{"slot":20,"name":"Data Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"100":{"slot":100,"name":"IMAP Server","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"imap.gmail.com"}}}},"visible":true},"101":{"slot":101,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${email_address}"}}}},"visible":true},"102":{"slot":102,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":null}}}},"visible":true},"103":{"slot":103,"name":"IMAP Port","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"993"}}}},"visible":true},"104":{"slot":104,"name":"Provider","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Other IMAP"}}}},"visible":true},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1013":{"slot":1013,"name":"Auto Debug","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}}},"visible":true},"1014":{"slot":1014,"name":"Debug Level","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"3"}}}},"visible":false},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":false},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}}},"visible":true},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Staging","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Snowflake Managed"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"67826":{"id":67826,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":1227580116,"x":144,"y":0,"width":32,"height":16,"inputConnectorIDs":[67828],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Table Iterator 0"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"email_stg_attachments_vw"}}}},"visible":true},"3":{"slot":3,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Id"},"2":{"slot":2,"type":"STRING","value":"email_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Attachments"},"2":{"slot":2,"type":"STRING","value":"attachment_name"}}}},"visible":true},"4":{"slot":4,"name":"Order By","elements":{},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"6":{"slot":6,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"7":{"slot":7,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true},"8":{"slot":8,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"9":{"slot":9,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Ascending"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[67833],"inputIterationConnectorIDs":[]},"67827":{"id":67827,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1896325668,"x":-117,"y":4,"width":32,"height":32,"inputConnectorIDs":[67831],"outputSuccessConnectorIDs":[67828],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"EmailAttachment-Xform 0"}}}},"visible":true},"2":{"slot":2,"name":"Transformation Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"EmailAttachment-Xform"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"67829":{"id":67829,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-560,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[67830],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"67828":{"id":67828,"sourceID":67827,"targetID":67826},"67831":{"id":67831,"sourceID":67825,"targetID":67827}},"failureConnectors":{},"unconditionalConnectors":{"67830":{"id":67830,"sourceID":67829,"targetID":67825}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{"67833":{"id":67833,"sourceID":67826,"targetID":67824}},"noteConnectors":{},"notes":{"67820":{"id":67820,"x":-235,"y":-109,"width":235,"height":215,"text":"Create a view that identifies emails with an attachment.  Add business logic based on requirements.","colour":"e6e63c"},"67821":{"id":67821,"x":-500,"y":-108,"width":243,"height":211,"text":"Get emails from a folder within an email account.","colour":"e6e63c"},"67822":{"id":67822,"x":35,"y":-112,"width":364,"height":221,"text":"Iterate over the view and call a sub orchestration job to get attachments and put them in an S3 bucket.\nTable Iterator sets the value of job variables (Column Mappings) that are sent to the Sub Orchestration Job (Set Scalar Variables).  Note that the Sub Orchestration Job has it's own Job Variables.","colour":"e6e63c"},"67823":{"id":67823,"x":-703,"y":-297,"width":1230,"height":162,"text":"Main Orchestration Job.  Note the job variables defined in this job.  To see Job Variables, right-click on the Job in the Explorer and select \"Manage Variables\", or right-click in the workspace and select \"Manage Variables\"\n\n**__Variables__**\n\n${email_address} - Email account to fetch emails from\n${email_folder} - The folder in the Email Account to fetch emails from\n\n${email_id} - Used when iterating over emails. Uniquely identifies an email.\n${attachment_name} - The name of the attachment in an email.\n${s3_bucket} - The AWS S3 location to load email attachments into.\n${local_stg} - The location on the Matillion instance to stage downloaded email attachments before moving into S3","colour":"d60000"}},"variables":{"attachment_name":{"definition":{"name":"attachment_name","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"default"},"email_address":{"definition":{"name":"email_address","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"arawan.gajajiva@matillion.com"},"email_folder":{"definition":{"name":"email_folder","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"Attachments"},"email_id":{"definition":{"name":"email_id","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"1"},"local_stg":{"definition":{"name":"local_stg","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"/usr/share/tomcat8"},"s3_bucket":{"definition":{"name":"s3_bucket","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"mtln-arawan/email-attachments/"}},"grids":{}},"info":{"name":"EmailAttachment-MainOrch","description":null,"type":"ORCHESTRATION","tag":"b5cac0d7-8d4a-4519-b279-e6fafdc97461"}}