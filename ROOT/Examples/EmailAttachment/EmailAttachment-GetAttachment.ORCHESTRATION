{"job":{"components":{"67814":{"id":67814,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-30576616,"x":16,"y":0,"width":32,"height":32,"inputConnectorIDs":[67816],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Bash Script 0"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are exported into bash, but should be considered read-only: \n#    echo $myvar\n###\naws s3 mv \"${local_stg}/${attachment_name}\" s3://${s3_bucket}/${attachment_name}"}}}},"visible":true},"3":{"slot":3,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"67815":{"id":67815,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-205266581,"x":-288,"y":0,"width":32,"height":32,"inputConnectorIDs":[67819],"outputSuccessConnectorIDs":[67816],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Email Query 0"}}}},"visible":true},"2":{"slot":2,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Advanced"}}}},"visible":true},"6":{"slot":6,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"7":{"slot":7,"name":"Data Selection","elements":{},"visible":false},"8":{"slot":8,"name":"Data Source Filter","elements":{},"visible":false},"9":{"slot":9,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":false},"10":{"slot":10,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Select ID\nFROM ${email_folder}\nWhere ID = '${email_id}'\nAND `DownloadAttachments`='true'\nAND `AttachmentFolder`= '${local_stg}'"}}}},"visible":true},"11":{"slot":11,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":false},"12":{"slot":12,"name":"Connection Options","elements":{},"visible":true},"13":{"slot":13,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"14":{"slot":14,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"15":{"slot":15,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"email_attachment_iterate"}}}},"visible":true},"16":{"slot":16,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"17":{"slot":17,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"100":{"slot":100,"name":"IMAP Server","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"imap.gmail.com"}}}},"visible":true},"101":{"slot":101,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${email_address}"}}}},"visible":true},"102":{"slot":102,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"Matillion Email App Passowrd"}}}},"visible":true},"103":{"slot":103,"name":"IMAP Port","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"993"}}}},"visible":true},"104":{"slot":104,"name":"Provider","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Other IMAP"}}}},"visible":true},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1013":{"slot":1013,"name":"Auto Debug","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}}},"visible":true},"1014":{"slot":1014,"name":"Debug Level","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"3"}}}},"visible":false},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":false},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}}},"visible":true},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Staging","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Snowflake Managed"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"67817":{"id":67817,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-544,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[67819],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"67816":{"id":67816,"sourceID":67815,"targetID":67814}},"failureConnectors":{},"unconditionalConnectors":{"67819":{"id":67819,"sourceID":67817,"targetID":67815}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{"67812":{"id":67812,"x":-616,"y":-167,"width":797,"height":292,"text":"Orchestration job downloads the email attachment for a passed in email and puts the email attachment into a specified S3 bucket.\n\nThis orchestration should be called from a parent Orchestration that will provide values for referenced Job Variables:\n${email_id}\n${email_folder}\n${email_address}\n${attachment_name}\n${s3_bucket}\n${local_stg}","colour":"e6e63c"}},"variables":{"attachment_name":{"definition":{"name":"attachment_name","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"orders_test.csv"},"email_address":{"definition":{"name":"email_address","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"arawan.gajajiva@matillion.com"},"email_folder":{"definition":{"name":"email_folder","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"Attachments"},"email_id":{"definition":{"name":"email_id","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"1"},"local_stg":{"definition":{"name":"local_stg","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"/usr/share/tomcat8"},"s3_bucket":{"definition":{"name":"s3_bucket","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"mtln-arawan/email-attachments"}},"grids":{}},"info":{"name":"EmailAttachment-GetAttachment","description":null,"type":"ORCHESTRATION","tag":"02c32d01-ed4d-48f9-b7f3-0d48219c818a"}}