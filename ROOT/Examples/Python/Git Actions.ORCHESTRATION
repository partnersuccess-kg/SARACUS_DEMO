{"job":{"components":{"68378":{"id":68378,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":0,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[68392,68393],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Start","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"68380":{"id":68380,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":720,"y":-112,"width":32,"height":32,"inputConnectorIDs":[68391],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Python3 - Switch Commit"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#!/usr/bin/python3\nimport os\nimport requests, json\n\nurl = \"https://127.0.0.1:8443/rest/v1/group/name/Matillion/project/name/Git Project/version/name/default/scm/switchCommit\"\n\n\npayload = {\n\"commitID\": jv_commit_id\n}\n\nheader = {\"Content-type\": \"application/json\"} \n\nresponse_decoded_json = requests.post(url, auth=requests.auth.HTTPBasicAuth('api-user', 'api-user'), json=payload, headers=header, verify=False)\nresponse_json = response_decoded_json.json()\n\nprint(response_json)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"68381":{"id":68381,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":427,"y":85,"width":32,"height":32,"inputConnectorIDs":[68389],"outputSuccessConnectorIDs":[68388],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python3 - Get Latest Commit"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#!/usr/bin/python3\nimport os\nimport requests, json\n\nurl = \"https://127.0.0.1:8443/rest/v1/group/name/Matillion/project/name/Git Project/scm/getState\"\n\nresponse_decoded_json = requests.get(url, auth=requests.auth.HTTPBasicAuth('api-user', 'api-user'), verify=False)\nresponse_json = response_decoded_json.json()\nprint(response_json)\n\ncom = response_json['result']['commits']\nlatestCommit = com[0]['referenceID']\nprint(latestCommit)\n\ncontext.updateVariable('jv_commit_id',latestCommit)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"68382":{"id":68382,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":244,"y":78,"width":32,"height":32,"inputConnectorIDs":[68392],"outputSuccessConnectorIDs":[68389],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python3 - Pull from Remote Repo (HTTPS)"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#!/usr/bin/python3\nimport os\nimport requests, json\n\nurl = \"https://127.0.0.1:8443/rest/v1/group/name/Matillion/project/name/Git Project/scm/fetch\"\n\n\npayload = {\n\"auth\":{\n\"authType\": \"HTTPS\",\n\"username\": \"xxxxxxxxxx\",\n\"password\": \"xxxxxxxxxxxx\"    \n},\n\"fetchOptions\":{\n\"removeDeletedRefs\": \"false\",\n\"thinFetch\": \"true\"\n}\n}\nprint(payload)\n\nheader = {\"Content-type\": \"application/json\"} \n\nresponse_decoded_json = requests.post(url, auth=requests.auth.HTTPBasicAuth('xxxxxx', 'xxxxxxx'), json=payload, headers=header, verify=False)\nresponse_json = response_decoded_json.json()\n\nprint(response_json)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"68383":{"id":68383,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":464,"y":-112,"width":32,"height":32,"inputConnectorIDs":[68390],"outputSuccessConnectorIDs":[68391],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Copy of Python3 - Get Latest Commit"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#!/usr/bin/python3\nimport os\nimport requests, json\n\nurl = \"https://127.0.0.1:8443/rest/v1/group/name/Matillion/project/name/Git Project/scm/getState\"\n\nresponse_decoded_json = requests.get(url, auth=requests.auth.HTTPBasicAuth('api-user', 'api-user'), verify=False)\nresponse_json = response_decoded_json.json()\nprint(response_json)\n\ncom = response_json['result']['commits']\nlatestCommit = com[0]['referenceID']\nprint(latestCommit)\n\ncontext.updateVariable('jv_commit_id',latestCommit)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"68384":{"id":68384,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-159239741,"x":843,"y":84,"width":32,"height":32,"inputConnectorIDs":[68386],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SQS Message 0"}}}},"visible":true},"2":{"slot":2,"name":"Region","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"eu-west-1"}}}},"visible":true},"3":{"slot":3,"name":"Queue Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true},"4":{"slot":4,"name":"Message","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true},"5":{"slot":5,"name":"Message Format","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Plain"}}}},"visible":true},"6":{"slot":6,"name":"Message Group Id","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"7":{"slot":7,"name":"Message Deduplication Id","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"68385":{"id":68385,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":232,"y":-107,"width":32,"height":32,"inputConnectorIDs":[68393],"outputSuccessConnectorIDs":[68390],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python3 - Pull from Remote Repo (SSH)"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#!/usr/bin/python3\nimport os\nimport requests, json\n\nurl = \"https://127.0.0.1:8443/rest/v1/group/name/Matillion/project/name/Git Project/scm/fetch\"\n\nkey = open(os.path.expanduser('/tmp/.ssh/xxxx')).read()\n#print(key)\n\npayload = {\n\"auth\":{\n\"authType\": \"SSH\",\n\"privateKey\": key,\n\"passphrase\": \"xxxxxxxxx\"\n},\n\"fetchOptions\":{\n\"removeDeletedRefs\": \"false\",\n\"thinFetch\": \"true\"\n}\n}\nprint(payload)\n\nheader = {\"Content-type\": \"application/json\"} \n\nresponse_decoded_json = requests.post(url, auth=requests.auth.HTTPBasicAuth('api-user', 'xxxxxxxx'), json=payload, headers=header, verify=False)\nresponse_json = response_decoded_json.json()\n\nprint(response_json)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"68387":{"id":68387,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186829,"x":590,"y":84,"width":32,"height":32,"inputConnectorIDs":[68388],"outputSuccessConnectorIDs":[68386],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python3 - Switch Commit"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#!/usr/bin/python3\nimport os\nimport requests, json\n\nurl = \"https://127.0.0.1:8443/rest/v1/group/name/Matillion/project/name/Git Project/version/name/default/scm/switchCommit\"\n\n\npayload = {\n\"commitID\": jv_commit_id\n}\n\nheader = {\"Content-type\": \"application/json\"} \n\nresponse_decoded_json = requests.post(url, auth=requests.auth.HTTPBasicAuth('api-user', 'api-user'), json=payload, headers=header, verify=False)\nresponse_json = response_decoded_json.json()\n\nprint(response_json)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"5":{"slot":5,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"68386":{"id":68386,"sourceID":68387,"targetID":68384},"68388":{"id":68388,"sourceID":68381,"targetID":68387},"68389":{"id":68389,"sourceID":68382,"targetID":68381},"68390":{"id":68390,"sourceID":68385,"targetID":68383},"68391":{"id":68391,"sourceID":68383,"targetID":68380}},"failureConnectors":{},"unconditionalConnectors":{"68392":{"id":68392,"sourceID":68378,"targetID":68382},"68393":{"id":68393,"sourceID":68378,"targetID":68385}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{},"variables":{},"grids":{}},"info":{"name":"Git Actions","description":null,"type":"ORCHESTRATION","tag":"e0e5b2d4-e51c-44da-b747-8ca7e16ebf18"}}