{"job":{"components":{"67714":{"id":67714,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-304,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[67717],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Start","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"67715":{"id":67715,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-145,"y":-6,"width":32,"height":32,"inputConnectorIDs":[67717],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Import Python Script from S3, Map to Var"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"import boto3 as boto\nimport csv\n\ns3 = boto.client('s3')\ns3_r = boto.resource('s3')\nbucket = s3_r.Bucket(s3_bucket)\n\n#Download file from S3 to local directory\nfor key in bucket.objects.all():\n  if 'hello' in key.key:\n    s3dir_s3file = key.key\n    s3file = s3dir_s3file\n    localdir_s3file = '/tmp/' + s3file\n    s3.download_file(s3_bucket, s3dir_s3file, localdir_s3file)\n    print('File: '+s3file+ ' saved to: '+ localdir_s3file)\n\n#READ PYTHON FILE, CONVERT TO MATILLION VARIABLE\nwith open('/tmp/hello.py') as read_file:\n  reader = csv.reader(read_file, delimiter = ',')\n  for row in reader:\n    row = str(row)[2:][:-2]\n    context.updateVariable('python_script', row)\n    \n    \nprint(python_script)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{},"failureConnectors":{},"unconditionalConnectors":{"67717":{"id":67717,"sourceID":67714,"targetID":67715}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{},"variables":{"python_script":{"definition":{"name":"python_script","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":""},"s3_bucket":{"definition":{"name":"s3_bucket","type":"TEXT","scope":"TASKBATCH","description":"","visibility":"PUBLIC"},"value":"mtln-techworkshops"}},"grids":{}},"info":{"name":"EC2toSnowpark","description":null,"type":"ORCHESTRATION","tag":"f64ad04f-ff7f-44a5-9889-5c8fa6f0f31f"}}